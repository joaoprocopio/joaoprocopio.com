---
import { env } from "~/env"
import Typography from "~/components/typography.astro"
import { SECTIONS } from "~/constants/sections"
import { LINKS } from "~/constants/links"
import GitHub from "~/icons/github.astro"
import Gmail from "~/icons/gmail.astro"
import LinkedIn from "~/icons/linkedin.astro"
import { AUTHOR, DESCRIPTION, JOB_TITLE } from "~/constants/seo"

type Props = astroHTML.JSX.HTMLAttributes

const props = Astro.props
---

<header {...props}>
  <hgroup>
    <h1>
      <Typography
        variant="largeTitle"
        affect="emphasized"
        element="a"
        href={env.getCanonicalUrl(Astro.site!, Astro.request.url)}>
        {AUTHOR}
      </Typography>
    </h1>

    <Typography variant="headline" element="h2" class="mt-1">
      {JOB_TITLE}
    </Typography>

    <Typography
      variant="callout"
      affect="regular"
      element="h3"
      class="text-secondary-foreground mt-6 max-w-2xs">
      {DESCRIPTION}
    </Typography>
  </hgroup>

  <nav class="mt-16 hidden lg:block">
    <ol class="[&>li+li]:mt-2">
      {
        SECTIONS.map((section) => (
          <li
            id={section.LINK_ID}
            class="text-muted-foreground data-[active=true]:text-foreground data-[active=false]:hover:text-accent-foreground data-[active=false]:active:text-secondary-foreground data-[active=false]:focus-visible:text-accent-foreground">
            <Typography
              variant="subheadline"
              affect="emphasized"
              element="a"
              class="uppercase"
              href={section.HREF}>
              {section.TITLE}
            </Typography>
          </li>
        ))
      }
    </ol>
  </nav>

  <nav class="mt-6 place-content-end lg:mt-0 [&>a+a]:ml-3">
    {
      LINKS.map((LINK) => {
        let Icon: astroHTML.JSX.Element

        switch (LINK.ID) {
          case "github":
            Icon = GitHub
            break
          case "gmail":
            Icon = Gmail
            break
          case "linkedin":
            Icon = LinkedIn
            break
        }

        return (
          <a
            href={LINK.HREF}
            aria-label={LINK.LABEL}
            target="_blank"
            class="text-muted-foreground hover:text-accent-foreground focus-visible:text-accent-foreground active:text-secondary-foreground inline-block">
            <Icon class="h-6" />
          </a>
        )
      })
    }
  </nav>
</header>
